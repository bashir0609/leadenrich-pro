(()=>{var e={};e.id=838,e.ids=[838],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},4596:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(5316),t(2029),t(5866);var r=t(3191),a=t(8716),l=t(7922),n=t.n(l),i=t(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["enrichment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5316)),"C:\\Users\\Islah4\\Desktop\\App Development\\leadenrich-pro\\frontend\\src\\app\\enrichment\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"C:\\Users\\Islah4\\Desktop\\App Development\\leadenrich-pro\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Islah4\\Desktop\\App Development\\leadenrich-pro\\frontend\\src\\app\\enrichment\\page.tsx"],p="/enrichment/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/enrichment/page",pathname:"/enrichment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3147:(e,s,t)=>{Promise.resolve().then(t.bind(t,5448))},5448:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(326),a=t(7577),l=t(5047),n=t(1151),i=t(3956),d=t(1664),o=t(9752),c=t(384),p=t(2270),h=t(4622),u=t(5855),m=t(381),x=t(6333),j=t(5290);function f(){let e=(0,l.useRouter)(),{selectedProvider:s}=(0,p.D)(),{addJob:t}=(0,u.d)(),f=(0,h.kr)(),[g,v]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[y,P]=(0,a.useState)({}),[N,S]=(0,a.useState)(!1),[q,k]=(0,a.useState)(0);if(!s)return null;let E=async e=>{v(e),S(!0),k(0);let s=new FormData;s.append("file",e);try{let e=setInterval(()=>{k(e=>Math.min(e+10,90))},200),t=await fetch("http://localhost:3002/api/upload/csv",{method:"POST",body:s});if(clearInterval(e),k(100),!t.ok)throw Error("Upload failed");let r=await t.json();w(r.data.data);let a={};r.data.suggestions.forEach(e=>{a[e.targetField]=e.sourceColumn}),P(a),m.ZP.success(`File uploaded successfully! ${r.data.totalRows} rows detected.`)}catch(e){m.ZP.error("Failed to upload file"),v(null)}finally{S(!1),k(0)}},D=[{field:"email",label:"Email",required:!0},{field:"firstName",label:"First Name",required:!1},{field:"lastName",label:"Last Name",required:!1},{field:"company",label:"Company",required:!1},{field:"domain",label:"Domain",required:!1},{field:"phone",label:"Phone",required:!1}],Z=async()=>{if(b&&s){if(!D.filter(e=>e.required).every(e=>y[e.field])){m.ZP.error("Please map all required fields");return}try{let r=b.preview.map(e=>{let s={};return Object.entries(y).forEach(([t,r])=>{s[t]=e[r]}),s}),a=await f.mutateAsync({providerId:s.name,data:{operation:"enrich-person",records:r,options:{columnMapping:y}}});t({id:a.jobId,status:"queued",progress:{total:a.data.totalRecords,processed:0,successful:0,failed:0},createdAt:new Date().toISOString(),logs:[]}),m.ZP.success("Enrichment job started!"),e.push(`/jobs/${a.jobId}`)}catch(e){m.ZP.error("Failed to start enrichment")}}};return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(d.z,{variant:"ghost",size:"icon",onClick:()=>e.push("/"),children:r.jsx(x.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Data Enrichment"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Using ",s.displayName," provider"]})]})]})}),(0,r.jsxs)(c.mQ,{defaultValue:"bulk",className:"w-full",children:[(0,r.jsxs)(c.dr,{className:"grid w-full grid-cols-2",children:[r.jsx(c.SP,{value:"single",children:"Single Enrichment"}),r.jsx(c.SP,{value:"bulk",children:"Bulk Enrichment"})]}),r.jsx(c.nU,{value:"single",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Single Record Enrichment"}),r.jsx(o.SZ,{children:"Enrich a single contact or company"})]}),r.jsx(o.aY,{children:r.jsx("p",{className:"text-muted-foreground",children:"Single enrichment coming soon..."})})]})}),(0,r.jsxs)(c.nU,{value:"bulk",className:"space-y-6",children:[(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Step 1: Upload Your Data"}),r.jsx(o.SZ,{children:"Upload a CSV file with the leads you want to enrich"})]}),r.jsx(o.aY,{children:r.jsx(n.p,{onFileSelect:E,uploading:N,progress:q})})]}),b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Step 2: Map Your Columns"}),r.jsx(o.SZ,{children:"Tell us which columns contain which data"})]}),r.jsx(o.aY,{children:r.jsx(i.L,{headers:b.headers,columnTypes:b.columnTypes,suggestions:b.suggestions,targetFields:D,onChange:P})})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Step 3: Preview & Start"}),r.jsx(o.SZ,{children:"Review your data before starting enrichment"})]}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Total Records"}),r.jsx("p",{className:"text-2xl font-bold",children:b.totalRows})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Estimated Credits"}),r.jsx("p",{className:"text-2xl font-bold",children:2*b.totalRows})]})]}),(0,r.jsxs)("div",{className:"bg-muted rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Data Preview"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"text-sm",children:[r.jsx("thead",{children:r.jsx("tr",{children:Object.keys(y).map(e=>r.jsx("th",{className:"px-2 py-1 text-left",children:e},e))})}),r.jsx("tbody",{children:b.preview.slice(0,3).map((e,s)=>r.jsx("tr",{children:Object.entries(y).map(([s,t])=>r.jsx("td",{className:"px-2 py-1",children:e[t]||"-"},s))},s))})]})})]}),r.jsx(d.z,{className:"w-full",size:"lg",onClick:Z,disabled:f.isPending,children:f.isPending?(0,r.jsxs)(r.Fragment,{children:[r.jsx(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting..."]}):"Start Enrichment"})]})]})]})]})]})]})}},5316:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\Islah4\Desktop\App Development\leadenrich-pro\frontend\src\app\enrichment\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,414,621,108,552,117,240,274,759,450],()=>t(4596));module.exports=r})();