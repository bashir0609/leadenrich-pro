(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9574:function(e,t,r){Promise.resolve().then(r.bind(r,8881))},8881:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return L}});var s=r(7437),n=r(4811),a=r.n(n);r(2778);var i=r(2731),o=r(2979),c=r(9827),l=r(3204),u=r(9064),d=r(2265),h=r(9376),m=r(5863);let f=["/login","/register","/forgot-password","/reset-password","/terms","/privacy"];function g(e){let{children:t}=e,{isAuthenticated:r,isLoading:n}=(0,i.a)(),a=(0,h.useRouter)(),o=(0,h.usePathname)();if((0,d.useEffect)(()=>{if(!n){let e=f.includes(o);r||e?r&&("/login"===o||"/register"===o)&&a.push("/"):a.push("/login")}},[r,n,o,a]),n)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(m.Z,{className:"h-8 w-8 animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading..."})]})});let c=f.includes(o);return r||c?(0,s.jsx)(s.Fragment,{children:t}):null}var p=r(7648),x=r(2381),y=r(2369);function v(){let{isAuthenticated:e,user:t,logout:r,isLoading:n}=(0,i.a)();return(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-primary text-primary-foreground shadow-sm",children:(0,s.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(p.default,{href:"/",className:"flex items-center space-x-2",children:(0,s.jsx)("span",{className:"text-xl font-bold",children:"LeadEnrich Pro"})})}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:n?(0,s.jsx)(m.Z,{className:"h-5 w-5 animate-spin"}):e?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-primary-foreground/10 px-3 py-1.5 rounded-full",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium hidden sm:inline-block",children:(null==t?void 0:t.name)||(null==t?void 0:t.email)})]}),(0,s.jsx)(x.z,{variant:"secondary",size:"sm",onClick:r,className:"font-medium",children:"Logout"})]}):(0,s.jsx)(x.z,{asChild:!0,size:"sm",variant:"secondary",className:"font-medium",children:(0,s.jsx)(p.default,{href:"/login",children:"Login"})})})]})})}var b=r(3448),j=r(9637),N=r(8420),E=r(5005),w=r(8728);let I=[{name:"Dashboard",href:"/",icon:j.Z},{name:"Providers",href:"/providers",icon:N.Z},{name:"Jobs",href:"/jobs",icon:E.Z},{name:"Settings",href:"/settings",icon:w.Z}];function S(){let e=(0,h.usePathname)();return(0,s.jsx)("nav",{className:"flex space-x-1",children:I.map(t=>{let r=t.icon,n=e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,s.jsxs)(p.default,{href:t.href,className:(0,b.cn)("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors",n?"bg-primary/10 text-primary font-semibold":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[(0,s.jsx)(r,{className:(0,b.cn)("h-4 w-4",n?"text-primary":"text-muted-foreground")}),t.name]},t.name)})})}function k(e){let{children:t}=e,{isAuthenticated:r}=(0,i.a)();return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,s.jsx)(v,{}),r&&(0,s.jsx)("div",{className:"border-b bg-background py-2",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)(S,{})})}),(0,s.jsx)("main",{className:"flex-grow container mx-auto px-4 py-6",children:t})]})}function T(e){let{children:t}=e;return(0,s.jsx)(k,{children:(0,s.jsx)(g,{children:t})})}function L(e){let{children:t}=e,[r]=(0,d.useState)(()=>new o.S({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:1,refetchOnWindowFocus:!1}}}));return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:a().className,children:(0,s.jsx)(c.aH,{client:r,children:(0,s.jsxs)(i.H,{children:[(0,s.jsx)(T,{children:t}),(0,s.jsx)(u.x7,{}),(0,s.jsx)(l.t,{initialIsOpen:!1})]})})})})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var s=r(7437),n=r(2265),a=r(7053),i=r(7712),o=r(3448);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,s.jsx)(d,{className:(0,o.cn)(c({variant:n,size:i,className:r})),ref:t,...u})});l.displayName="Button"},6305:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});class s{async request(e,t){let r=this.getToken(),s=new Headers(t.headers);s.set("Content-Type","application/json"),r&&s.set("Authorization","Bearer ".concat(r));let n=await fetch("".concat(this.baseURL).concat(e),{...t,headers:s});if(204===n.status)return{success:!0,data:null};let a=await n.json();if(!n.ok){var i;throw Error((null===(i=a.error)||void 0===i?void 0:i.message)||"HTTP error! status: ".concat(n.status))}return a}async get(e,t){return console.log("\uD83C\uDF10 Making GET request to:",e),this.request(e,{...t,method:"GET"})}async post(e,t,r){return this.request(e,{...r,method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t,r){return this.request(e,{...r,method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e,t){return this.request(e,{...t,method:"DELETE"})}async getJobs(){console.log("2. [apiClient] getJobs() method called.");let e=this.get("/api/jobs");return console.log("3. [apiClient] get(/api/jobs) promise returned."),e}async getJobStatus(e){return this.get("/api/jobs/".concat(e))}async getProviders(){return this.get("/api/providers")}async testProvider(e){return this.post("/api/providers/".concat(e,"/test"))}async executeProvider(e,t){return this.post("/api/providers/".concat(e,"/execute"),t)}constructor(){this.baseURL="http://localhost:3002",this.getToken=()=>localStorage.getItem("authToken"),console.log("API Client initialized with URL:",this.baseURL)}}let n=new s;t.Z=n},2731:function(e,t,r){"use strict";r.d(t,{H:function(){return l},a:function(){return u}});var s=r(7437),n=r(2265),a=r(6305);let i=(0,n.createContext)(void 0),o={user:null,isLoading:!0,error:null};function c(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return{...e,user:t.payload.user,isLoading:!1,error:null};case"LOGIN_ERROR":case"REGISTER_ERROR":return{...e,user:null,error:t.payload,isLoading:!1};case"LOGOUT":return{...e,user:null,error:null};case"INITIALIZE":return{...e,user:t.payload.user,isLoading:!1};default:return e}}function l(e){let{children:t}=e,[r,l]=(0,n.useReducer)(c,o);(0,n.useEffect)(()=>{(async()=>{if(console.log("[AuthContext] Checking user session..."),localStorage.getItem("authToken"))try{let e=await a.x.get("/api/auth/me");if(e.success&&e.data.user)l({type:"INITIALIZE",payload:{isAuthenticated:!0,user:e.data.user}});else throw Error("Session invalid")}catch(e){localStorage.removeItem("authToken"),l({type:"INITIALIZE",payload:{isAuthenticated:!1,user:null}})}else l({type:"INITIALIZE",payload:{isAuthenticated:!1,user:null}})})()},[]);let u=(0,n.useCallback)(async(e,t)=>{l({type:"SET_LOADING",payload:!0});try{let s=await a.x.post("/api/auth/login",{email:e,password:t});if(s.success&&s.data)localStorage.setItem("authToken",s.data.token),l({type:"LOGIN_SUCCESS",payload:s.data});else{var r;throw Error((null===(r=s.error)||void 0===r?void 0:r.message)||"Login failed")}}catch(e){throw l({type:"LOGIN_ERROR",payload:e.message}),e}},[]),d=(0,n.useCallback)(async(e,t,r)=>{l({type:"SET_LOADING",payload:!0});try{let n=await a.x.post("/api/auth/register",{name:e,email:t,password:r});if(n.success&&n.data)localStorage.setItem("authToken",n.data.token),l({type:"REGISTER_SUCCESS",payload:n.data});else{var s;throw Error((null===(s=n.error)||void 0===s?void 0:s.message)||"Registration failed")}}catch(e){throw l({type:"REGISTER_ERROR",payload:e.message}),e}},[]),h=(0,n.useCallback)(()=>{localStorage.removeItem("authToken"),l({type:"LOGOUT"}),window.location.href="/login"},[]);return(0,n.useCallback)(()=>{l({type:"CLEAR_ERROR"})},[]),(0,n.useCallback)(async()=>{try{let e=await fetch("/api/auth/generate-key",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to generate API key");return(await e.json()).apiKey}catch(e){throw Error(e.message)}},[]),r.user,r.isLoading,r.user,(0,s.jsx)(i.Provider,{value:{user:r.user,login:u,register:d,logout:h,isAuthenticated:!!r.user,isLoading:r.isLoading},children:t})}function u(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},2778:function(){}},function(e){e.O(0,[2,317,763,383,648,303,971,117,744],function(){return e(e.s=9574)}),_N_E=e.O()}]);