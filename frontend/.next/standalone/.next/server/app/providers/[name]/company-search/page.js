(()=>{var e={};e.id=194,e.ids=[194],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},8309:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),r(710),r(2029),r(5866);var n=r(3191),a=r(8716),l=r(7922),i=r.n(l),t=r(5231),o={};for(let e in t)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>t[e]);r.d(s,o);let c=["",{children:["providers",{children:["[name]",{children:["company-search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,710)),"C:\\Users\\Islah4\\Desktop\\App Development\\leadenrich-pro\\frontend\\src\\app\\providers\\[name]\\company-search\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Islah4\\Desktop\\App Development\\leadenrich-pro\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Islah4\\Desktop\\App Development\\leadenrich-pro\\frontend\\src\\app\\providers\\[name]\\company-search\\page.tsx"],m="/providers/[name]/company-search/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/providers/[name]/company-search/page",pathname:"/providers/[name]/company-search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},125:(e,s,r)=>{Promise.resolve().then(r.bind(r,3551))},6333:(e,s,r)=>{"use strict";r.d(s,{Z:()=>n});let n=(0,r(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4019:(e,s,r)=>{"use strict";r.d(s,{Z:()=>n});let n=(0,r(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3551:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>P});var n=r(326),a=r(7577),l=r(5047),i=r(1664),t=r(1190),o=r(4794),c=r(9280),d=r(9752),m=r(3819),p=r(6333),u=r(5290),h=r(8307),x=r(1540),j=r(381),v=r(2270),g=r(4622),f=r(2604),y=r(4093),C=r(9200);function P(){let e=(0,l.useRouter)(),s=(0,l.useParams)().name,{selectedProvider:r,setSelectedProvider:P}=(0,v.D)(),{data:N}=(0,g.ko)(),E=(0,g.li)(),[b,w]=(0,a.useState)({show:!1,headers:[],lines:[],field:"domains",selectedColumn:""}),[R,S]=(0,a.useState)({domains:[],domainsExcluded:[],industries:[],countries:[],minEmployees:"",maxEmployees:"",minRevenue:"",maxRevenue:"",limit:50}),[k,A]=(0,a.useState)([]),[I,D]=(0,a.useState)({currentPage:1,totalResults:0,nextPageToken:""}),[_,Z]=(0,a.useState)(!1),M=(e,s)=>{let r=s.target.files?.[0];if(!r)return;let n=new FileReader;n.onload=s=>{let r=(s.target?.result).split(/\r?\n/);if(r.length>0){let s=r[0].split(/[,;]\s*/);w({show:!0,headers:s,lines:r,field:e,selectedColumn:s[0]})}},n.readAsText(r)},$=async()=>{if(!r){j.ZP.error("Please select a provider before searching");return}let e=R.domains.map(e=>f.j.cleanDomain(e)).filter(e=>null!==e),s=R.domainsExcluded.map(e=>f.j.cleanDomain(e)).filter(e=>null!==e);if(!(e.length>0||s.length>0||R.industries.length>0||R.countries.length>0||""!==R.minEmployees||""!==R.maxEmployees||""!==R.minRevenue||""!==R.maxRevenue)){j.ZP.error("Please provide at least one search filter");return}Z(!0);try{if(!r){j.ZP.error("No provider selected"),Z(!1);return}let n={providerId:r.name,operation:"search-companies",params:{filters:{domains:e,domainsExcluded:s,industries:R.industries,countries:R.countries,employeeCount:R.minEmployees||R.maxEmployees?{from:parseInt(R.minEmployees)||1,to:parseInt(R.maxEmployees)||999999999}:void 0,revenue:R.minRevenue||R.maxRevenue?{from:parseInt(R.minRevenue)||1,to:parseInt(R.maxRevenue)||999999999}:void 0},limit:Math.min(Math.max(1,R.limit),200),pageToken:I.nextPageToken||""}};if(n.params.filters){let e={domains:n.params.filters.domains||[],domainsExcluded:n.params.filters.domainsExcluded||[],industries:n.params.filters.industries||[],countries:n.params.filters.countries||[],employeeCount:n.params.filters.employeeCount,revenue:n.params.filters.revenue};Object.keys(e).forEach(s=>{let r=e[s];Array.isArray(r)&&0===r.length?delete e[s]:void 0===r&&delete e[s]}),n.params.filters=e}console.log("Final Payload:",n),console.group("Company Search Debug"),console.log("Payload:",JSON.stringify(n,null,2)),console.log("Selected Provider:",r),console.log("Search Params:",R),console.log("Cleaned Domains:",e),console.log("Cleaned Excluded Domains:",s),console.groupEnd();try{let e=await E.mutateAsync(n);if(console.group("Search Result"),console.log("Raw Result:",e),console.log("Success:",e.success),console.log("Data:",e.data),console.log("Error:",e.error),console.groupEnd(),e.success&&e.data?.companies){let s=e.data;A(s.companies),D(e=>({...e,totalResults:s.total||s.companies.length,nextPageToken:s.nextPageToken||""})),j.ZP.success(`Found ${s.total||s.companies.length} companies`)}else{let s=e.error?.message||"No companies found";j.ZP.error(s),A([])}}catch(e){console.group("Mutation Error"),console.error("Mutation Error:",e),!0===e.isAxiosError?(console.log("Axios Error Details:",{response:e.response?.data,status:e.response?.status,headers:e.response?.headers}),e.response?j.ZP.error(`API Error: ${e.response.status} - ${JSON.stringify(e.response.data)}`):e.request?j.ZP.error("No response received from server"):j.ZP.error(`Error: ${e.message}`)):j.ZP.error(`Search failed: ${e.message}`),console.groupEnd()}}catch(e){console.group("Unexpected Error"),console.error("Unexpected Error:",e),console.groupEnd(),j.ZP.error("An unexpected error occurred during company search")}finally{Z(!1)}};return(0,n.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6 p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[n.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>e.push(`/providers/${r?.name||s}`),children:n.jsx(p.Z,{className:"h-4 w-4"})}),(0,n.jsxs)("h1",{className:"text-3xl font-bold",children:["Company Search - ",r?.displayName||"Provider"]})]}),(0,n.jsxs)(d.Zb,{children:[(0,n.jsxs)(d.Ol,{children:[n.jsx(d.ll,{children:"Company Search Filters"}),n.jsx(d.SZ,{children:"Find companies using multiple search criteria"})]}),(0,n.jsxs)(d.aY,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Include Domains"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("textarea",{className:"w-full h-24 p-2 border rounded-md resize-none text-sm",placeholder:"google.com microsoft.com apple.com",value:R.domains.join("\n"),onChange:e=>{let s=e.target.value.split("\n").map(e=>e.trim()).filter(Boolean);S(e=>({...e,domains:s}))}}),(0,n.jsxs)("div",{children:[n.jsx(o._,{className:"block mb-2",children:"Import CSV"}),n.jsx(t.I,{type:"file",accept:".csv",className:"w-full",onChange:e=>M("domains",e)})]})]}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:[R.domains.length," domains"]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Exclude Domains"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("textarea",{className:"w-full h-24 p-2 border rounded-md resize-none text-sm",placeholder:"competitor.com exclude.com",value:R.domainsExcluded.join("\n"),onChange:e=>{let s=e.target.value.split("\n").map(e=>e.trim()).filter(Boolean);S(e=>({...e,domainsExcluded:s}))}}),(0,n.jsxs)("div",{children:[n.jsx(o._,{className:"block mb-2",children:"Import CSV"}),n.jsx(t.I,{type:"file",accept:".csv",className:"w-full",onChange:e=>M("domainsExcluded",e)})]})]}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:[R.domainsExcluded.length," excluded domains"]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Industries"}),n.jsx(y.V,{options:(0,C.wl)(),value:R.industries,onValueChange:e=>S(s=>({...s,industries:e})),placeholder:"Select industries...",searchPlaceholder:"Search industries...",multiple:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Countries"}),n.jsx(y.V,{options:(0,C.rj)(),value:R.countries,onValueChange:e=>S(s=>({...s,countries:e})),placeholder:"Select countries...",searchPlaceholder:"Search countries...",multiple:!0})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Min Employees"}),n.jsx(t.I,{type:"number",placeholder:"1",value:R.minEmployees,onChange:e=>S(s=>({...s,minEmployees:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Max Employees"}),n.jsx(t.I,{type:"number",placeholder:"10000",value:R.maxEmployees,onChange:e=>S(s=>({...s,maxEmployees:e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Min Revenue ($)"}),n.jsx(t.I,{type:"number",placeholder:"1000000",value:R.minRevenue,onChange:e=>S(s=>({...s,minRevenue:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Max Revenue ($)"}),n.jsx(t.I,{type:"number",placeholder:"100000000",value:R.maxRevenue,onChange:e=>S(s=>({...s,maxRevenue:e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(o._,{children:"Results Limit"}),(0,n.jsxs)(c.Ph,{value:R.limit.toString(),onValueChange:e=>S(s=>({...s,limit:parseInt(e)})),children:[n.jsx(c.i4,{children:n.jsx(c.ki,{})}),(0,n.jsxs)(c.Bw,{children:[n.jsx(c.Ql,{value:"10",children:"10"}),n.jsx(c.Ql,{value:"20",children:"20"}),n.jsx(c.Ql,{value:"50",children:"50"}),n.jsx(c.Ql,{value:"100",children:"100"}),n.jsx(c.Ql,{value:"200",children:"200"})]})]})]})]}),n.jsx(i.z,{className:"w-full mt-6",onClick:$,disabled:_,size:"lg",children:_?(0,n.jsxs)(n.Fragment,{children:[n.jsx(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Searching Companies..."]}):(0,n.jsxs)(n.Fragment,{children:[n.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Search Companies"]})})]})]}),k.length>0&&(0,n.jsxs)(d.Zb,{children:[n.jsx(d.Ol,{children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[n.jsx(d.ll,{children:"Company Search Results"}),(0,n.jsxs)(d.SZ,{children:["Found ",k.length," companies",I.totalResults>k.length&&` (${I.totalResults.toLocaleString()} total available)`]})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(i.z,{variant:"outline",onClick:()=>{if(0===k.length){j.ZP.error("No results to export");return}let e=new Blob([["Name,Domain,Countries,Industries,Employee Count,Revenue",...k.map(e=>`"${e.name}","${e.domain}","${e.countries.join("|")}","${e.industries.join("|")}","${e.employeeCount}","${e.revenue}"`)].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=`company-search-${Date.now()}.csv`,r.click(),URL.revokeObjectURL(s),j.ZP.success("Companies exported to CSV")},children:[n.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),I.nextPageToken&&n.jsx(i.z,{variant:"outline",onClick:async()=>{Z(!0);try{if(!r){j.ZP.error("No provider selected"),Z(!1);return}let e=await E.mutateAsync({providerId:r.name,data:{operation:"search-companies",params:{filters:{domains:R.domains,domainsExcluded:R.domainsExcluded,industries:R.industries,countries:R.countries,employeeCount:R.minEmployees||R.maxEmployees?{from:parseInt(R.minEmployees)||1,to:parseInt(R.maxEmployees)||999999999}:void 0,revenue:R.minRevenue||R.maxRevenue?{from:parseInt(R.minRevenue)||1,to:parseInt(R.maxRevenue)||999999999}:void 0},limit:R.limit,pageToken:I.nextPageToken}}});if(e.success&&e.data?.companies){let s=[...k,...e.data.companies];A(s),D(s=>({...s,nextPageToken:e.data.nextPageToken||""}))}}catch(e){j.ZP.error("Failed to load more results"),console.error(e)}finally{Z(!1)}},children:"Load More"})]})]})}),n.jsx(d.aY,{children:(0,n.jsxs)(m.iA,{children:[n.jsx(m.xD,{children:(0,n.jsxs)(m.SC,{children:[n.jsx(m.ss,{children:"Name"}),n.jsx(m.ss,{children:"Domain"}),n.jsx(m.ss,{children:"Countries"}),n.jsx(m.ss,{children:"Industries"}),n.jsx(m.ss,{children:"Employees"}),n.jsx(m.ss,{children:"Revenue"})]})}),n.jsx(m.RM,{children:k.map((e,s)=>(0,n.jsxs)(m.SC,{children:[n.jsx(m.pj,{children:e.name||"N/A"}),n.jsx(m.pj,{children:e.domain&&n.jsx("a",{href:`https://${e.domain}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:e.domain})}),n.jsx(m.pj,{children:Array.isArray(e.countries)?e.countries.join(", "):e.countries||"N/A"}),n.jsx(m.pj,{children:Array.isArray(e.industries)?e.industries.join(", "):e.industries||"N/A"}),n.jsx(m.pj,{children:e.employeeCount?e.employeeCount.toLocaleString():"N/A"}),n.jsx(m.pj,{children:e.revenue||"N/A"})]},s))})]})})]}),b.show&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-xl w-full",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Select Domain Column"}),(0,n.jsxs)("div",{className:"space-y-2 mb-4",children:[n.jsx(o._,{children:"Available Columns:"}),(0,n.jsxs)(c.Ph,{value:b.selectedColumn,onValueChange:e=>w(s=>({...s,selectedColumn:e})),children:[n.jsx(c.i4,{children:n.jsx(c.ki,{placeholder:"Select column"})}),n.jsx(c.Bw,{children:b.headers.map(e=>n.jsx(c.Ql,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[n.jsx(o._,{children:"Data Preview:"}),(0,n.jsxs)(m.iA,{children:[n.jsx(m.xD,{children:n.jsx(m.SC,{children:b.headers.map(e=>n.jsx(m.ss,{children:e},e))})}),n.jsx(m.RM,{children:b.lines.slice(1,4).map((e,s)=>{let r=e.split(/[,;]\s*/);return n.jsx(m.SC,{children:r.map((e,s)=>n.jsx(m.pj,{children:e},s))},s)})})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[n.jsx(i.z,{variant:"outline",onClick:()=>w(e=>({...e,show:!1})),children:"Cancel"}),n.jsx(i.z,{onClick:()=>{if(!b.selectedColumn){j.ZP.error("Please select a column");return}let e=b.headers.indexOf(b.selectedColumn),s=b.lines.slice(1).map(s=>{let r=s.split(/[,;]\s*/);return f.j.cleanDomain(r[e])}).filter(e=>null!==e);S(e=>({...e,[b.field]:Array.from(new Set([...e[b.field],...s]))})),j.ZP.success(`Imported ${s.length} valid domains`),w(e=>({...e,show:!1,selectedColumn:""}))},children:"Import"})]})]})})]})}},710:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});let n=(0,r(8570).createProxy)(String.raw`C:\Users\Islah4\Desktop\App Development\leadenrich-pro\frontend\src\app\providers\[name]\company-search\page.tsx#default`)},4478:(e,s,r)=>{"use strict";r.d(s,{f:()=>t});var n=r(7577),a=r(5226),l=r(326),i=n.forwardRef((e,s)=>(0,l.jsx)(a.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var t=i}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),n=s.X(0,[948,414,621,108,552,117,759,164],()=>r(8309));module.exports=n})();